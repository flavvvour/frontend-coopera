@startuml Coopera Frontend Class Diagram

!theme plain
skinparam linetype ortho
skinparam nodesep 60
skinparam ranksep 80

skinparam class {
  BackgroundColor white
  BorderColor #667eea
  BorderThickness 2
  ArrowColor #6b7280
  FontSize 11
}

' =============== APP LAYER ===============

package "App" #FFF3E0 {
  
  class App {
    +Router
    +GlobalStyles
  }
  
  class Router {
    +Routes
    +Navigate
  }
}

' =============== PAGES ===============

package "Pages" #E8EAF6 {
  
  class LandingPage {
    +renderHero()
  }
  
  class LoginPage {
    +handleTelegramAuth()
  }
  
  class DashboardPage {
    +renderSidebar()
    +renderRoutes()
  }
  
  class TeamsPage {
    -teams: Team[]
    +loadTeams()
    +createTeam()
    +deleteTeam()
  }
  
  class TeamDetailPage {
    -team: Team
    +updateTask()
    +createTask()
  }
}

' =============== WIDGETS ===============

package "Widgets" #FCE4EC {
  
  class Sidebar {
    -isCollapsed: boolean
    +toggleSidebar()
    +renderMenuItems()
  }
}

' =============== FEATURES ===============

package "Features" #E3F2FD {
  
  class KanbanBoard {
    +tasks: Task[]
    +onUpdateTask()
    +handleDragEnd()
  }
  
  class CreateTaskForm {
    +onCreateTask()
    +handleSubmit()
  }
  
  class CreateTeamForm {
    +onCreateTeam()
    +handleSubmit()
  }
  
  class ImageCropModal {
    +imageSrc: string
    +onCropComplete()
    +handleSave()
  }
  
  class TelegramAuth {
    +onAuth()
    +initWidget()
  }
}

' =============== ENTITIES ===============

package "Entities" #F3E5F5 {
  
  class Team {
    +id: string
    +name: string
    +members: TeamMember[]
    +projects: Project[]
  }
  
  class Task {
    +id: string
    +title: string
    +status: TaskStatus
    +points: number
    +assigneeId: string
  }
  
  class Column {
    +id: string
    +title: string
    +color: string
  }
  
  enum TaskStatus {
    todo
    in-progress
    review
    done
  }
  
  class User {
    +id: string
    +username: string
    +telegramId: number
  }
}

' =============== SHARED ===============

package "Shared" #E8F5E9 {
  
  class APIClient {
    +getTeams()
    +createTeam()
    +createTask()
    +updateTask()
  }
  
  class useUserStore {
    -user: User
    +setUser()
    +logout()
  }
}

' =============== RELATIONSHIPS ===============

' App layer
App --> Router
Router --> LandingPage
Router --> LoginPage
Router --> DashboardPage

' Dashboard composition
DashboardPage --> Sidebar
DashboardPage --> TeamsPage
DashboardPage --> TeamDetailPage

' Pages use Features
LoginPage --> TelegramAuth
TeamsPage --> CreateTeamForm
TeamDetailPage --> KanbanBoard
TeamDetailPage --> ImageCropModal
KanbanBoard --> CreateTaskForm

' Pages use Entities
TeamsPage ..> Team
TeamDetailPage ..> Team
KanbanBoard ..> Task
KanbanBoard ..> Column
TelegramAuth ..> User

' Entity relationships
Team "1" *-- "*" Task
Task --> TaskStatus
Task "*" --> "0..1" User : assigned

' All use APIClient
TeamsPage ..> APIClient
TeamDetailPage ..> APIClient
CreateTaskForm ..> APIClient
CreateTeamForm ..> APIClient
TelegramAuth ..> APIClient

' Store usage
LoginPage ..> useUserStore
TeamDetailPage ..> useUserStore

' API returns Entities
APIClient ..> Team : returns
APIClient ..> Task : returns
APIClient ..> User : returns

@enduml
